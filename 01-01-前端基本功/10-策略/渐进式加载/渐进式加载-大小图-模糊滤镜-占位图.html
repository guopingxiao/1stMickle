<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>
        测试：将网络调成3G

        加载顺序：先内联生成占位图，再加载小图，最后加载原始图
    </title>
    <style>
        *{
            margin:0;
            padding:0;
        }
        @keyframes placeHolderShimmer{
            0%{
                background-position: -640px 0
            }
            100%{
                background-position: 640px 0
            }
        }
        #box {
            /*background-color:#ccc;*/
            /*height:468px;*/
            /*width:100%;*/
            width:100%;
            overflow:hidden;

            animation-duration: 1s;
            animation-fill-mode: forwards;
            animation-iteration-count: infinite;
            animation-name: placeHolderShimmer;
            animation-timing-function: linear;
            background: #f6f7f8;
            background: linear-gradient(to right, #eeeeee 8%, #dddddd 18%, #eeeeee 33%);
            background-size: 800px 104px;
        }
        #box img{
            width:100%;
            height:100%;

            transform: scale(1.1);
            opacity: 0;
        }

        .blur {
            -webkit-filter: blur(3px);
        }

        .animate{
            animation: origin 1s ease-out forwards;
        }
        @keyframes origin {
            0% {
                transform: scale(1.1);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>

</head>
<body>
<div id="box">
    <img class="blur" id="thisimg" src="../../../images/ls/small.jpg"  data-src="../../../images/ls/large.jpg"/>
</div>

<script src="../../../lib/jquery-1.11.3.min.js"></script>
<script>
$(function () {
  console.log('load...', $('#thisimg').data('src'))
  $('#thisimg').attr('loaded',true)
  $('#thisimg').attr('src', $('#thisimg').data('src'))
  $('#thisimg').removeClass('blur')
  $('#thisimg').addClass('animate')
})
</script>
</body>
</html>